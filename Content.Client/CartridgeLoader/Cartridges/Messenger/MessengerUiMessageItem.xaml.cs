// Â© SS220, An EULA/CLA with a hosting restriction, full text: https://raw.githubusercontent.com/SerbiaStrong-220/space-station-14/master/CLA.txt

using Robust.Client.AutoGenerated;
using Robust.Client.Graphics;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.CartridgeLoader.Cartridges.Messenger;

[GenerateTypedNameReferences]
public sealed partial class MessengerUiMessageItem : BoxContainer
{
    private readonly StyleBoxFlat _styleBoxRight = new()
    {
        BackgroundColor = Color.FromHex("#03adfc20"),
    };

    private readonly StyleBoxFlat _styleBoxLeft = new()
    {
        BackgroundColor = Color.FromHex("#59595920"),
    };

    public MessengerUiMessageItem(string message, TimeSpan timeSpan, Label.AlignMode alignMode, HAlignment hAlignment)
    {
        RobustXamlLoader.Load(this);
        switch (hAlignment)
        {
            case HAlignment.Right:
                MessageContainer.PanelOverride = _styleBoxRight;
                break;
            case HAlignment.Left:
                MessageContainer.PanelOverride = _styleBoxLeft;
                break;
        }

        MessageContainer.HorizontalAlignment = hAlignment;

        MessageLabel.SetMessage(message);

        TimeLabel.Text = $"{timeSpan:hh\\:mm\\:ss}";
        TimeLabel.Align = alignMode;
    }

    public MessengerUiMessageItem()
    {
        RobustXamlLoader.Load(this);
    }
}
