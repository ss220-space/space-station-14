## Описание
Это self-hosted версия TTS сервера на основе моделей Silero. Совместима с билдом на момент 12.10.2023

Модели Silero предоставлены https://github.com/snakers4/silero-models/tree/master


## Требования

Python 3.11.+

- ffmpeg (Устанавливать вручную)
- torch
- soundfile
- pydub
- flask

Подробнее в `requirements.txt`

## Установка

Воспользуйтесь в командной строке, открытой в папке tools\ttsServer: `pip install -r requirements.txt`
Или воспользуйтесь файлом `install_requirements.bat`

Если не установлен ffmpeg, установите его. https://ffmpeg.org/download.html

## Как пользоваться

Соберите сервер, откройте server_config.toml в bin/Content.Server
Впишите туда:
```
[tss]
enabled = true
api_url = "http://127.0.0.1:5000/tts/"
timeout = *зависит от железа*
```

Запустите `tts_server.py` через bat файл `launch_server.bat` или воспользуйтесь командной строкой и введите `python tts_server.py`.
Будет выведен адрес сервера и номер порта для подключения к API, сверьтесь что в api_url указан отобразившийся адрес.

Внимание: производительность разняется от компьютеру к компьютеру. Возможны задержки от 0.5 секунд.
Без CUDA длительность синтеза озвучки слова "Хуй" может достигать 20 секунд и более. Внесите нужные правки в CVar таймаута.

## Примечания

Модели, поставляемые вышеуказанным репозиторием, содержат меньшее количество голосов, чем используемое на игровом сервере.
По умолчанию стоит мужской голос `aidar`
Если желаете поменять голос озвучки, в файле tts_server.py поменяйте значение primary_speaker на желаемое.
Уточняйте возможные голоса в самом репозитории.

Если хотите поменять модель, удалите или переместите файл `model.pt`, а в `tts_processor` заместо ссылки на модель в `torch.hub.download_url_to_file...`
поставьте желаемую ссылку.

Также вы можете скачать модель вручную и переименовать её в `model.pt`, ознакомьтесь с инструкциями в репозитории моделей.

## Авторство

Изначально сделано https://github.com/Vladisvell , внесены правки для корректной работы с SS14.
Источник оригинала: https://github.com/ss220-space/Paradise
Модели предоставлены https://github.com/snakers4/silero-models